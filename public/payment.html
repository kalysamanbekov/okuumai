<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OKUUM.AI - –û–ø–ª–∞—Ç–∞ –¥–æ—Å—Ç—É–ø–∞</title>
  <style>
    :root {
      --primary-color: #10a37f;
      --primary-hover: #0d8c6d;
      --secondary-color: #5436da;
      --light-bg: #f9fafb;
      --border-color: #e5e7eb;
      --text-color: #1f2937;
      --text-light: #6b7280;
      --danger-color: #ef4444;
      --success-color: #10b981;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      color: var(--text-color);
      background-color: var(--light-bg);
    }
    
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background-color: white;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }
    
    .logo {
      font-size: 1.5rem;
      font-weight: bold;
      color: var(--primary-color);
      text-decoration: none;
    }
    
    .user-info {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .logout-btn {
      padding: 6px 12px;
      background-color: transparent;
      border: 1px solid var(--border-color);
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .logout-btn:hover {
      background-color: var(--light-bg);
    }
    
    .page-title {
      font-size: 2rem;
      margin: 30px 0 20px;
      color: var(--text-color);
      text-align: center;
    }
    
    .payment-info {
      background-color: white;
      border-radius: 8px;
      padding: 25px;
      margin-bottom: 30px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }
    
    .payment-info h2 {
      font-size: 1.5rem;
      margin-bottom: 15px;
      color: var(--primary-color);
    }
    
    .payment-details {
      margin-bottom: 20px;
      padding: 15px;
      background-color: var(--light-bg);
      border-radius: 6px;
      border-left: 4px solid var(--primary-color);
    }
    
    .payment-details p {
      margin-bottom: 10px;
    }
    
    .payment-details strong {
      color: var(--text-color);
    }
    
    .form-container {
      background-color: white;
      border-radius: 8px;
      padding: 25px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }
    
    .form-title {
      font-size: 1.5rem;
      margin-bottom: 20px;
      color: var(--text-color);
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
    }
    
    .form-control {
      width: 100%;
      padding: 10px 15px;
      border: 1px solid var(--border-color);
      border-radius: 4px;
      font-size: 1rem;
      transition: border-color 0.2s;
    }
    
    .form-control:focus {
      outline: none;
      border-color: var(--primary-color);
    }
    
    .file-upload {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      border: 2px dashed var(--border-color);
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .file-upload:hover {
      border-color: var(--primary-color);
    }
    
    .file-upload.drag-over {
      border-color: var(--primary-color);
      background-color: rgba(16, 163, 127, 0.05);
    }
    
    .file-upload-icon {
      font-size: 2rem;
      margin-bottom: 10px;
      color: var(--primary-color);
    }
    
    .file-upload-text {
      text-align: center;
      margin-bottom: 10px;
    }
    
    .file-upload-input {
      display: none;
    }
    
    .file-name {
      margin-top: 10px;
      font-size: 0.9rem;
      color: var(--text-light);
    }
    
    .submit-btn {
      display: block;
      width: 100%;
      padding: 12px;
      background-color: var(--primary-color);
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    
    .submit-btn:hover {
      background-color: var(--primary-hover);
    }
    
    .submit-btn:disabled {
      background-color: var(--border-color);
      cursor: not-allowed;
    }
    
    .alert {
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 4px;
      display: none;
    }
    
    .alert-success {
      background-color: rgba(16, 185, 129, 0.1);
      border: 1px solid var(--success-color);
      color: var(--success-color);
    }
    
    .alert-error {
      background-color: rgba(239, 68, 68, 0.1);
      border: 1px solid var(--danger-color);
      color: var(--danger-color);
    }
    
    /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
    @media (max-width: 768px) {
      .container {
        padding: 15px;
      }
      
      .page-title {
        font-size: 1.5rem;
        margin: 20px 0 15px;
      }
      
      .payment-info, .form-container {
        padding: 15px;
      }
    }
  </style>
</head>
<body>
  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –±–∞–Ω–Ω–µ—Ä–∞ —Ç—Ä–∏–∞–ª–∞ -->
  <link rel="stylesheet" href="css/TrialBanner.css">
  
  <!-- –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ -->
  <script type="module">
    import { auth, storage, db, submitPaymentInfo } from './js/firebase.js';
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
    auth.onAuthStateChanged(async (user) => {
      if (!user) {
        // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω, –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞
        window.location.href = '/login.html';
      } else {
        // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.getElementById('page-content').style.display = 'block';
        document.getElementById('loading-screen').style.display = 'none';
        
        // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —à–∞–ø–∫–µ
        const userDisplayName = user.displayName || user.email.split('@')[0];
        document.getElementById('user-name').textContent = userDisplayName;
        
        // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –≤—ã—Ö–æ–¥–∞
        document.getElementById('logout-button').addEventListener('click', () => {
          auth.signOut().then(() => {
            window.location.href = '/login.html';
          });
        });
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
        const paymentForm = document.getElementById('payment-form');
        paymentForm.addEventListener('submit', async (e) => {
          e.preventDefault();
          
          const submitBtn = document.getElementById('submit-btn');
          const alertSuccess = document.getElementById('alert-success');
          const alertError = document.getElementById('alert-error');
          
          // –°–∫—Ä—ã–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
          alertSuccess.style.display = 'none';
          alertError.style.display = 'none';
          
          // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
          const fullName = document.getElementById('full-name').value;
          const fileInput = document.getElementById('payment-screenshot');
          const file = fileInput.files[0];
          
          if (!fullName || !file) {
            alertError.textContent = '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –æ–± –æ–ø–ª–∞—Ç–µ.';
            alertError.style.display = 'block';
            return;
          }
          
          try {
            submitBtn.disabled = true;
            submitBtn.textContent = '–û—Ç–ø—Ä–∞–≤–∫–∞...';
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä –∏ —Ç–∏–ø —Ñ–∞–π–ª–∞ –µ—â–µ —Ä–∞–∑ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
            const allowedTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];
            const maxSize = 5 * 1024 * 1024; // 5 –ú–ë
            
            if (!allowedTypes.includes(file.type)) {
              throw new Error('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (JPEG, PNG, GIF –∏–ª–∏ WEBP).');
            }
            
            if (file.size > maxSize) {
              throw new Error('–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å 5 –ú–ë.');
            }
            
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é submitPaymentInfo –∏–∑ firebase.js
            const { success, error } = await submitPaymentInfo(user.uid, fullName, file);
            
            if (!success) {
              throw new Error(error?.message || error || '–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –¥–∞–Ω–Ω—ã—Ö');
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
            alertSuccess.style.display = 'block';
            paymentForm.reset();
            document.getElementById('file-name').textContent = '';
            document.getElementById('image-preview').style.display = 'none';
          } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –¥–∞–Ω–Ω—ã—Ö:', error);
            alertError.textContent = '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –¥–∞–Ω–Ω—ã—Ö. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.';
            alertError.style.display = 'block';
          } finally {
            submitBtn.disabled = false;
            submitBtn.textContent = '–û—Ç–ø—Ä–∞–≤–∏—Ç—å';
          }
        });
      }
    });
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞
    document.addEventListener('DOMContentLoaded', () => {
      const fileUpload = document.getElementById('file-upload');
      const fileInput = document.getElementById('payment-screenshot');
      const fileName = document.getElementById('file-name');
      
      // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ –æ–±–ª–∞—Å—Ç–∏ –∑–∞–≥—Ä—É–∑–∫–∏
      fileUpload.addEventListener('click', () => {
        fileInput.click();
      });
      
      // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞
      fileInput.addEventListener('change', () => {
        handleFileSelect(fileInput.files);
      });
      
      // –û–±—Ä–∞–±–æ—Ç–∫–∞ drag-and-drop
      fileUpload.addEventListener('dragover', (e) => {
        e.preventDefault();
        e.stopPropagation();
        fileUpload.classList.add('drag-over');
      });
      
      fileUpload.addEventListener('dragleave', (e) => {
        e.preventDefault();
        e.stopPropagation();
        fileUpload.classList.remove('drag-over');
      });
      
      fileUpload.addEventListener('drop', (e) => {
        e.preventDefault();
        e.stopPropagation();
        fileUpload.classList.remove('drag-over');
        
        const dt = e.dataTransfer;
        if (dt.files.length) {
          handleFileSelect(dt.files);
        }
      });
      
      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
      function handleFileSelect(files) {
        const alertError = document.getElementById('alert-error');
        alertError.style.display = 'none';
        
        if (files.length > 0) {
          const file = files[0];
          
          // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞ (—Ç–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
          const allowedTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];
          if (!allowedTypes.includes(file.type)) {
            alertError.textContent = '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (JPEG, PNG, GIF –∏–ª–∏ WEBP).';
            alertError.style.display = 'block';
            fileInput.value = '';
            fileName.textContent = '';
            return;
          }
          
          // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ (–Ω–µ –±–æ–ª–µ–µ 5 –ú–ë)
          const maxSize = 5 * 1024 * 1024; // 5 –ú–ë
          if (file.size > maxSize) {
            alertError.textContent = '–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å 5 –ú–ë.';
            alertError.style.display = 'block';
            fileInput.value = '';
            fileName.textContent = '';
            return;
          }
          
          // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∏–º—è —Ñ–∞–π–ª–∞
          fileName.textContent = file.name;
          
          // –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
          const reader = new FileReader();
          reader.onload = function(e) {
            const previewImg = document.getElementById('image-preview');
            previewImg.src = e.target.result;
            previewImg.style.display = 'block';
          };
          reader.readAsDataURL(file);
        } else {
          fileName.textContent = '';
          document.getElementById('image-preview').style.display = 'none';
        }
      }
    });
  </script>
  
  <!-- –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ -->
  <div id="loading-screen" style="display: flex; justify-content: center; align-items: center; height: 100vh;">
    <div style="text-align: center;">
      <h2>–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
      <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ</p>
    </div>
  </div>
  
  <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç–æ) -->
  <div id="page-content" style="display: none;">
    <div class="header">
      <a href="/" class="logo">OKUUM.AI</a>
      
      <!-- –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –∏ –∫–Ω–æ–ø–∫—É –≤—ã—Ö–æ–¥–∞ -->
      <div class="user-info">
        <span id="user-name"></span>
        <button id="logout-button" class="logout-btn">–í—ã–π—Ç–∏</button>
      </div>
    </div>
  
    <div class="container">
      <h1 class="page-title">–û–ø–ª–∞—Ç–∞ –ø–æ–ª–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞</h1>
      
      <div class="payment-info">
        <h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ–ø–ª–∞—Ç–µ</h2>
        <div class="payment-details">
          <p><strong>–°—Ç–æ–∏–º–æ—Å—Ç—å:</strong> 890 —Å–æ–º</p>
          <p><strong>–°—Ä–æ–∫ –¥–æ—Å—Ç—É–ø–∞:</strong> 30 –¥–Ω–µ–π</p>
          <p><strong>–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã:</strong> –ü–µ—Ä–µ–≤–æ–¥ –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞</p>
          <p><strong>–†–µ–∫–≤–∏–∑–∏—Ç—ã –¥–ª—è –æ–ø–ª–∞—Ç—ã:</strong></p>
          <ul style="margin-left: 20px;">
            <li>MBANK: +996 709 681 733</li>
          </ul>
          <p style="margin-top: 15px;"><strong>–í–∞–∂–Ω–æ:</strong> –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã —Å–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –µ–≥–æ –≤ —Ñ–æ—Ä–º—É –Ω–∏–∂–µ.</p>
        </div>
      </div>
      
      <div class="form-container">
        <h2 class="form-title">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã</h2>
        
        <div id="alert-success" class="alert alert-success">
          –í–∞—à–∞ –∑–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –ú—ã –ø—Ä–æ–≤–µ—Ä–∏–º –æ–ø–ª–∞—Ç—É –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤–∞—à –¥–æ—Å—Ç—É–ø –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤.
        </div>
        
        <div id="alert-error" class="alert alert-error"></div>
        
        <form id="payment-form">
          <div class="form-group">
            <label for="full-name">–§–ò–û –ø–ª–∞—Ç–µ–ª—å—â–∏–∫–∞</label>
            <input type="text" id="full-name" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –ø–æ–ª–Ω–æ–µ –∏–º—è" required>
          </div>
          
          <div class="form-group">
            <label>–°–∫—Ä–∏–Ω—à–æ—Ç –æ–± –æ–ø–ª–∞—Ç–µ</label>
            <div id="file-upload" class="file-upload">
              <div class="file-upload-icon">üìÅ</div>
              <div class="file-upload-text">–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª –∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –µ–≥–æ —Å—é–¥–∞</div>
              <img id="image-preview" style="display: none; max-width: 100%; max-height: 200px; margin-top: 10px; border-radius: 4px;" />
              <input type="file" id="payment-screenshot" class="file-upload-input" accept="image/*" required>
              <div id="file-name" class="file-name"></div>
            </div>
          </div>
          
          <button type="submit" id="submit-btn" class="submit-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        </form>
      </div>
    </div>
  </div>
</body>
</html>
